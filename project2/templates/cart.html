{% extends 'base.html' %}
{% block title %}Shopping Cart{% endblock %}
{% block content %}
<section id="cart" class="cart">
    <div class="max-width">
        <h2 class="title">Shopping Cart</h2>
        <div class="cart-content">
            {% if items %}
            <ul class="cart-items">
                {% for item in items %}
                <li class="cart-item">
                    <span class="item-name">{{ item.product.name }}</span>
                    <span class="item-details">
                        {{ item.quantity }} x ${{ item.product.price }} = ${{ item.quantity * item.product.price }}
                    </span>
                    <a class="remove-button" href="{{ url_for('remove_from_cart', product_id=item.product.id) }}">Remove</a>
                </li>
                {% endfor %}
            </ul>
            <div class="cart-summary">
                <p>Subtotal: <span class="price">${{ total|float }}</span></p>
                <p>Tax: <span class="price">${{ tax|float }}</span></p>
                <p>Shipping: <span class="price">${{ shipping|float }}</span></p>
                <p class="total"><strong>Total: <span class="price">${{ grand_total|float }}</span></strong></p>
                <div class="checkout-buttons">
                    {% if session.get('user_id') %}
                    <a href="{{ url_for('checkout') }}" class="checkout-button">Proceed to Checkout</a>
                    {% else %}
                    <p>Please <a href="{{ url_for('login') }}">login</a> or <a href="{{ url_for('register') }}">sign up</a> to checkout.</p>
                    {% endif %}
                    <a href="{{ url_for('index') }}" class="continue-shopping">Continue Shopping</a>
                </div>
            </div>
            {% else %}
            <p>Your cart is empty.</p>
            <a href="{{ url_for('index') }}">Back to Shopping</a>
            {% endif %}
        </div>
    </div>
</section>
{% endblock %}
